暂时在这里记录下，最近使用前端调试神器fiddler整理的使用指南。
1	什么是Fiddler?
Fiddler是web调试的利器，实质是位于客户端和服务器端的HTTP代理。使用fiddler可以快速高效的进行前端调试，十分方便。
2	Fiddler可以干什么？
2.1	模拟请求与响应，让前后端独立调试
在有前后端数据交互的情况下，调试需要联调，而前后端工作很难同步完成，因此实际开发中联调往往已经是最后的环节。所以针对边开发边调试，有以下调试办法。
2.1.1	打桩调试
前端打桩调试，实际是利用nodeJS在本地快速搭建一个服务器，然后根据需求在代码中编写响应代码和响应数据。
缺点：
1）需要明白修改哪个文件，以及如何修改，因此要求一定的JS基础。
2）在需要整体页面效果完整展现时，需要mock所有接口，针对于portal部分接口修改调试的场景，工作量被迫增加。
3）代码修改不可逆，模拟不同场景，需要不同的数据，不易管理。
2.1.2	Fiddler调试
能够记录客户端和服务器之间的所有 HTTP请求，可以针对特定的HTTP请求，分析请求数据、设置断点、调试web应用、修改请求的数据，甚至可以修改服务器返回的数据。最关键的是fiddler提供UI界面进行配置，操作简单效率高，并且可以只修改部分接口，其他接口沿用已有接口，从而随时实现页面的完整展现。
2.2	重定向静态文件
我们搭建的实际测试环境皆为Linux环境，而前端开发与调试因为需要配合浏览器实时查看效果，以及使用浏览器的开发者调试工具；因此在我们常常在本地Windows环境下进行开发，然后将修改好的代码移至测试环境。而前端代码往往是实现一部分组件测试一部分组件，且前端代码易变动，所以在开发阶段，通过上述方法分环境开发测试十分不便。
因此，我们通过fiddler，将静态文件的请求重定向到本地，从而在本地进行测试开发。
并且通过重定向，我们可以实现线上bug定位调试。
2.3	开发环境host配置
	通常情况下，配置host需要修改系统文件，很不方便；在多个开发环境下切换很低效。而fiddler则可以通过UI界面快速高效的配置host。
2.4	性能分析和优化
Fiddler会提供请求的详细信息：包含请求与响应报文大小，所花时间等信息，清晰明了，可分析得到网站需要优化的部分
3	怎么使用Fiddler
在学会怎么使用fiddler前，先了解下fiddler。
3.1	Fiddler使用环境
Fiddler 是一个使用本地 127.0.0.1:8888 的 HTTP 代理，任何能够设置 HTTP 代理为 127.0.0.1:8888 的浏览器和应用程序都可以使用 Fiddler。
常用的IE、chrome浏览器，fiddler开启后都会自动修改其代理设置，不需要我们手动配置，因此直接使用即可。

3.2	Fiddler使用详解
3.2.1	菜单栏
 
Rules设置抓包的一些规则，可以在里面设置断点（一般采用的底部的快捷图标设置，见后续章节）。一般调试，使用界面上已经暴露的快捷图标即可，因此其他选项这里不展开详细描述，如需了解可以参考官方文档。
3.2.2	会话面板
 
主要是Fiddler抓取到的每条http请求（每一条称为一个session）,主要包含了请求的url，协议，状态码，body等信息，详细的字段含义如下图所示：
 
每条请求前面的图标详解如下：
 
3.2.3	工具栏
 
1）	 ，给某条请求添加备注信息。
2）	 ，选择请求后，点击replay按钮，可以重新发送请求。
3）	 ，清空下面的会话面板。
4）	 ，用于断点调试。
5）	 ，响应以流的方式返回给服务器。
6）	 ，对会话进行解码。
7）	 ，设置保存会话的个数。
8）	 ，选择对哪些应用软件使用fiddler代理。
9）	 ，快捷打开浏览器。
3.2.4	会话详情面板
 
展示了针对每条http请求的具体统计（例如发送/接受字节数，发送/接收时间，还有粗略统计世界各地访问该服务器所花费的时间）和数据包分析。
1）	statistics
关于HTTP请求的性能和其他数据分析：
  
我们可以从中看出一些基本性能数据：如DNS解析的时间消耗是8ms,建立TCP/IP连接的时间消耗是8ms等等信息。
2）	Inspectors。
分为上下两个部分，上半部分是请求头部分，下半部分是响应头部分。对于每一部分，提供了多种不同格式查看每个请求和响应的内容。JPG 格式使用 ImageView 就可以看到图片，HTML/js/CSS 使用 TextView 可以看到响应的内容。Raw标签可以查看原始的符合HTTP标准的请求和响应头。Auth则可以查看授权Proxy-Authorization 和 Authorization的相关信息。Cookies标签可以看到请求的cookie和响应的set-cookie头信息。
  
3）AutoResponder
Fiddler比较重要且比较强大的功能之一。可用于拦截某一请求，并重定向到本地的资源，或者使用Fiddler的内置响应。可用于调试服务器端代码而无需修改服务器端的代码和配置，因为拦截和重定向后，实际上访问的是本地的文件或者得到的是Fiddler的内置响应。（具体示例，后面章节会详解）
4）composer
可以模拟向相应的服务器发送数据的过程（不错，这就是灌水机器人的基本原理,也可以是部分http flood的一种方式）。
 
也可以粘贴一次请求的raw http headers,达到模拟请求的目的：
 
5）Filter
Filter标签则可以设置Fiddler的过滤规则，来达到过滤http请求的目的。最简单如：过滤内网http请求而只抓取internet的http请求，或则过滤相应域名的http请求。Fiddler的过滤器非常强大，可以过滤特定http状态码的请求，可以过滤特定请求类型的http请求（如css请求，image请求，js请求等），可以过滤请求报文大于或则小于指定大小（byte）的请求：
 
3.2.5	底部快捷操作栏
 
提供一些快捷操作图标。
1） ，设置是否进行抓包，点击消失后则不会再对会话抓包。
2） ，设置对哪些应用软件进行抓包。
3） ，设置断点（左数第三个图标）设置断点后可以实时修改请求、响应内。i) 图标为向上的箭头时，在请求发送至服务器前中断；ii) 为向下的箭头时，在响应发送给浏览器前中断；iii) 图标为空不显示时，代表没有断点。（注意：打完断点后，需点击前面提到过的GO图标，使会话继续）
4） ，显示当前会话面板有多少条会话。
3.2.6	其他
 
1）	黑色框框部分，为命令行输入框
2）	下面的filters，显示了当前会话面板过滤了哪些会话

3.3	Fiddler使用案例
接下来通过具体的案例来讲解fiddler的使用方法。
3.3.1	静态文件重定向
1）如果只修改调试单个文件，那么只需使用autoResponse将对应的文件重定向即可。
 
详细步骤：
I）勾选前面两个按钮，第二个按钮代表不符合规则的请求不用重定向，不勾选的话其他不符合规则的请求无法正常响应。 
II）将请求从会话面板中拖过来，可以避免手动输入。
支持请求URL的精准匹配和正则匹配，在下图所示中设置。并且可以点击test，测试匹配。
 

III）在下图所示选择设置框中选择需要重定向的文件。 

2）批量文件重定向
I)下载并安装插件stave。安装后出现如下stave面板，
 
II)右击编辑规则，将URL重定向到对应文件夹。
3.3.2	模拟响应
如果只需单次修改响应，直接打断点，然后在会话详情面板修改即可。
如果需要长久修改响应，或者模拟新接口，则与前面单个文件重定向相似，使用autoResponse。
I）打开修改响应功能
勾选前面两个按钮，第二个按钮代表不符合规则的请求不用重定向，不勾选的话其他不符合规则的请求无法正常响应。 
II）配置请求URL
可以将请求从会话面板中拖过来，避免手动输入。
支持请求URL的精准匹配和正则匹配，在下图所示中设置。并且可以点击test，测试匹配。
 

III）设置响应文件
如下图点击添加新响应，此时不会弹出设置响应具体内容的对话框，继续往下执行即可。
 
点击保存按钮，此时会弹出修改具体响应内容的对话框，在里面编辑响应内容然后保存即可。
 
 
3.3.3	配置host
点击菜单栏的tools，在里面选择hosts选项，然后保存。需要批量配置时，可查找相关插件，这里不作详述。
 
